<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2021-01-21 Thu 18:50 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Mastering kitty terminal</title>
<meta name="generator" content="Org mode">
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel='stylesheet' type='text/css' href='css/style.css' />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
                               <a accesskey="H" href="/">Home</a>
                               </div><div id="content">
<header>
<h1 class="title">Mastering kitty terminal</h1>
</header><p>
<span class="timestamp-wrapper"><span class="timestamp">&lt;2020-11-20 Fri&gt;</span></span>
</p>

<blockquote>
<p>
<a href="https://sw.kovidgoyal.net/kitty/">kitty</a> - the fast, featureful, GPU based terminal emulator
</p>
</blockquote>

<p>
I've been using kitty for quite a long time now. Before it was iTerm and it was slow as my grand-mom's computer. Opening a new tab literally takes forever, I am always starting to type before it is loaded.
</p>

<p>
My life was desperate and wasteful before I found kitty.
</p>


<figure>
<img src="img/kitty.jpg" alt="kitty.jpg">

<figcaption><span class="figure-number">Figure 1: </span>kitty - an animal</figcaption>
</figure>

<p>
Not that one, this one.
</p>


<figure>
<img src="img/the-kitty.png" alt="the-kitty.png">

<figcaption><span class="figure-number">Figure 2: </span>kitty - a terminal</figcaption>
</figure>

<p>
I have tried and used different terminal emulators but prefer this one because it allows me to use less mouse, do the job faster and concentrate on the programming. As a person who uses Emacs in a terminal it's especially important to have a responsive environment.
</p>

<p>
One thing that I like about it is <code>tabs</code>. They were made as a simple text.
</p>


<figure>
<img src="img/new-tab.png" alt="new-tab.png">

<figcaption><span class="figure-number">Figure 3: </span>Tabs are text</figcaption>
</figure>

<p>
Kitty allows to <a href="https://sw.kovidgoyal.net/kitty/#remote-control">control</a> terminal in any way, like send some text to one of the tabs, jump to the tab by name, split windows and run in each of them some command.
</p>

<p>
One particular feature that I use every day is theme changer.
</p>


<figure>
<img src="gif/theme-changer.gif" alt="theme-changer.gif">

<figcaption><span class="figure-number">Figure 4: </span>Change theme on the fly</figcaption>
</figure>

<p>
I wrote a script that loads all themes from the folder, pipes them to <code>fzf</code> and tells <code>kitty</code> to change the color scheme when selected.
You can find link to my config in the end of the page, but there are a lot of things so you might be particularly interested in this lines:
</p>

<p>
Enable remote control in kitty config
</p>
<div class="org-src-container">
<pre class="src src-conf">...
allow_remote_control yes
listen_on unix:/tmp/kitty
...
</pre>
</div>

<p>
Download kitty themes, google to find more
</p>
<div class="org-src-container">
<pre class="src src-bash">git clone https://github.com/dexpota/kitty-themes ~/.config/kitty/themes
</pre>
</div>

<p>
Create an alias with this command
</p>
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #483d8b;">cd</span> ~/.config/kitty/themes &amp;&amp; fzf --preview <span style="color: #8b2252;">'head -n 40 {} &amp;&amp; kitty @ --to unix:/tmp/kitty set-colors -a -c {}'</span>; <span style="color: #483d8b;">cd</span> -
</pre>
</div>

<p>
Now let's find out about <a href="https://sw.kovidgoyal.net/kitty/#kittens">kittens</a> - small terminal programs that can be used to extend kitty's functionality.
</p>

<p>
For example Unicode input.
</p>


<figure>
<img src="gif/unicode-input.gif" alt="unicode-input.gif">

<figcaption><span class="figure-number">Figure 5: </span>Choose Unicode and paste at cursor</figcaption>
</figure>

<p>
Another example of kitten: press a shortcut and paste file path from the screen.
I know that there are a lot of programs like <code>fpp</code> and a lot of plugins for tmux. I played with all of them and none of them worked as good as this one.
</p>


<figure>
<img src="gif/file-path-chooser.gif" alt="file-path-chooser.gif">

<figcaption><span class="figure-number">Figure 6: </span>Choose file path and paste</figcaption>
</figure>

<p>
You can also choose/copy/insert lines, IPs, URLs or even write your own nice little kitten which will parse the screen by your pattern (e.g. parse and copy timestamps).
</p>

<p>
But sometimes you might need to select something specific. Well no problema amigo, press another shortcut and buffer output will be redirected to any program you want (vim in my example). Then few presses and voila it's in the clipboard.
</p>


<figure>
<img src="gif/clipboard.gif" alt="clipboard.gif">

<figcaption><span class="figure-number">Figure 7: </span>Find and copy</figcaption>
</figure>

<p>
You can find vim-ansi file in my config at the end of the page, but here is how to enable it.
</p>

<p>
In the kitty.conf map this command to any shortcut. <code>pipe</code> means pipe the buffer of the screen to the command you specified <code>/usr/local/bin/vim-ansi</code>. <code>@ansi</code> basically means pass ansi codes, it will allow us to see colored text in vim and <code>overlay</code> means do it in the current screen instead of openning new window or splitting it.
</p>
<div class="org-src-container">
<pre class="src src-conf">map super+f pipe @ansi overlay /usr/local/bin/vim-ansi
</pre>
</div>

<p>
This is quite tricky script which is done to keep colored text of the term and maps <code>q</code> to exit vim faster and does not copies new line when copying.
</p>
<div class="org-src-container">
<pre class="src src-sh"><span style="color: brightgreen;">#</span><span style="color: brightgreen;">!/bin/</span><span style="color: #a020f0;">sh</span>
cat - | awk <span style="color: #8b2252;">'/^$/ {nlstack=nlstack "\n";next;} {printf "%s",nlstack; nlstack=""; print;}'</span> &gt; /tmp/buff
vim -c <span style="color: #8b2252;">'term tail -n 200 /tmp/buff'</span> -c <span style="color: #8b2252;">':only'</span> -c <span style="color: #8b2252;">'nnoremap q :q!&lt;CR&gt;'</span> -c <span style="color: #8b2252;">'map $ g_'</span> &lt; /dev/tty
</pre>
</div>

<p>
Next, I use <a href="https://github.com/paul-nameless/tg">telegram in terminal</a> so when notification comes and I press on it I will jump right to the correct tab.
</p>


<figure>
<img src="gif/jump-to-tab.gif" alt="jump-to-tab.gif">

<figcaption><span class="figure-number">Figure 8: </span>Bang, boom, jump to the tab</figcaption>
</figure>

<p>
Here is an example:
</p>

<div class="org-src-container">
<pre class="src src-bash">terminal-notifier -title test -message <span style="color: #8b2252;">'Testing kitty remote control'</span> -execute <span style="color: #8b2252;">'/usr/local/bin/kitty @ --to unix:/tmp/kitty focus-window &amp;&amp; /usr/local/bin/kitty @ --to unix:/tmp/kitty focus-tab --no-response -m title:[replace with you tab title]'</span>
</pre>
</div>

<p>
Now, window layouts.
A layout is an arrangement of multiple kitty windows inside a top-level OS window. It's nothing new, every terminal has this feature already. But I found it more convenient. You can choose layout on the fly, split window however you want, move it around, etc.
</p>


<figure>
<img src="gif/layouts.gif" alt="layouts.gif">

<figcaption><span class="figure-number">Figure 9: </span>Split window however you want</figcaption>
</figure>

<p>
There is nothing special nowadays to be able to view images in a terminal. It's working great, I use it regularly to view pictures/stickers from <code>telegram</code>.
</p>


<figure>
<img src="gif/icat.gif" alt="icat.gif">

<figcaption><span class="figure-number">Figure 10: </span>Images in terminal</figcaption>
</figure>

<p>
<code>icat</code> is just an alias to
</p>

<div class="org-src-container">
<pre class="src src-sh"><span style="color: #483d8b;">alias</span> <span style="color: #ff00ff;">icat</span>=<span style="color: #8b2252;">"kitty +kitten icat --align=left"</span>
</pre>
</div>

<p>
<b>Conclusion</b>
</p>

<p>
Kitty has a lot of other cool features and customization, <a href="https://sw.kovidgoyal.net/kitty/">check it out</a>.
</p>

<p>
I don't want you to convince to use one terminal over another. I want to share my experience and will be happy if it will help somebody (or improve personal life).
</p>

<p>
P.S. If you did some cool stuff with kitty, please share it.
</p>

<p>
<b>Helpful links</b>
</p>

<ul class="org-ul">
<li><a href="https://gist.github.com/paul-nameless/a14e4a6ba310119df2cf5409cbb3738b">My kitty config files</a></li>
<li><a href="https://sw.kovidgoyal.net/kitty/conf.html?highlight=listen_on#opt-kitty.listen_on">Kitty config doc</a></li>
</ul>

<hr>

<ul class="org-ul">
<li>2020-11-20 <a href="mastering-kitty.html">Mastering kitty terminal</a></li>
<li>2020-11-19 <a href="index.html">Paul Nameless page</a></li>
</ul>
</div>
</body>
</html>
